SUSE Enterprise Server 
--------------------------------------------------------------------------------
= Understanding the Filesystem Hierarchy Standard =
--------------------------------------------------------------------------------
  Part of the LSB (Linux     | Whic directories must be located on the first  
  Standard bas specifications| level and what they contain
                             | 
  Defines a two-layer        | * Directories in the top layer (off the root "/")
  hierachy                   | * At the second layer under /usr (Unix System Resources)
                             |   and /var
                             | 
  Design Factors             | * Compartmentalization
                             | * Writablility
                             | * Shareability
  www.pathname.com/fhs/      | 
                             | 
--------------------------------------------------------------------------------
Linux Filetypes              |  Normal files
                             |    * ASCII text files
                             |    * Executalbe files
                             |    * Graphics fles
                             |  Directories
                             |    * Organize files on the disk
                             |    * Cotain files and subdirectories
                             |    * Implement the hierarchical file system
                             |  Hard Links
                             |    * Secondary file names for files on the disk
                             |    * Multiple file names referencing a sing inode
                             |    * Referenced files must reside in the same file system
                             |  Symbolic Links
                             |    * References to other files on the disk
                             |    * The inode contains a reference to another file name
                             |    * Referenced files can exist in the same file 
                             |      sytem or in other file systems
                             |    * A symbolic link can reference a non-existing
                             |      file (broken link)
                             |  Device Files
                             |    * Represent hardware (except network cards)
                             |    * Link between hardware devices and the kernel drivers
                             |    * Kernel drivers read from and write to the device file
                             |    * The kernel get the data to the actual hardware in the correct format
                             |    * Types:
                             |        * Block Devices
                             |        * Character Devices
                             |    * Created automatically by the OS (udev)
                             |
Linux Device Names for Hard  |  * 1st initialized hard drive = /dev/sda
  Hard Drives                |  * 2nd initialized hard drive = /dev/sdb ... ect
                             |  * Partition numbers are appended to the device name:
                             |
        Devce                                                 Name
        First primary partition on first hard driver          /dev/sda1
        Second primary partition or an extended partition on  /dev/sda2
        first hard driver
        First primary partition on the third hard drive       /dev/sdc1
        First logical partition on  first hard drive          /dev/sda5
        Second logical partition on first hard drive          /dev/sda6
                             |
Interprocess Communication   |  * Files used by processes to communicate with
  File                       |    each other
                             |  * Types:
                             |    * Sockets (bi-directional communication)
                             |    * Pipes/FIFOs (unidirectional communication)
                             |
                             |
                             |
                             |
                             |
--------------------------------------------------------------------------------
= Week two - Work with the command Line > Getting help at the cli =
--------------------------------------------------------------------------------
  Help Resources             |  <command> -h or <command> --help
                             |  Man [section] command
                             |    * Find references: man -f keyword
                             |    * List for keywords: man -k keyword
                             |    * Display descriptions: whatis <command>
                             |  Info pages: info command
                             |  * Software package documentation in
                             |    - /usr/share/doc/packages
                             |  * Release notes
                             |    - /usr/share/doc/release-notes
                             | 
  Shell Environment          |  A shell can be invoked in two different ways
                             |    * Login Shell     - The user's environment is set
                             |    * Non-login Shell - The shell inherits an existing
                             |                        environment
                             |
  Profiles                   |  Global profiles
                             |  /etc/profile
                             |    /etc/profile.d/*.sh               <-- not touched when install and upgrad
                             |    /etc/profile.local
                             |
                             |  /etc/bash.bashrc
                             |    /etc/bash_completion.d/*.sh       <-- not touched when install and upgrad
                             |    /etc/bash.bashrc.local
                             |
                             |  /etc/inputrc
                             |    (bash -> libreadline.so)
                             |
                             |  User specific profiles:
                             |    ~/.profile
                             |    ~/.bashrc
                             |    ~/.alias
                             |
                             |
  Order of execution for     |  1) /etc/profile
  login shells               |  2) /etc/profile.d/*.sh
                             |  3) /etc/profile.local
                             |  4) ~/.profile
                             |  5) /etc/bash.bashrc
                             |  6) /etc/bash_completion.d/*.sh
                             |  7) /etc/bash.bashrc.local
                             |  8) /etc/inputrc
                             |  9) ~/.bashrc
                             |  10) ~/.alias
                             |
  Order of execution for     |  1) /etc/bash.bashrc
  non-login shells           |  2) /etc/bash_completion.d/*.sh
                             |  3) /etc/bash.bashrc.local
                             |  4) /etc/inputrc
                             |  5) ~/.bashrc
                             |  6) ~/.alias
                             |
  show current aliases       |  > alias
                             |
  Temp remove alias          |  > unalias
                             |
  execute a command from     | Ctrl+R
  history                    |
                             |
Shell Expansions {wild cards)| * Any number or zero values
                             |
                             | ? Any one value
                             |
                             | {..} list of values
                             |
                             | [...] Range of values [1-9], [a-z]
                             |
                             | [!abc] None of these characters
                             |
                             | "..." Interpret all characters between the quotes
                             |       as ASCII characters except: $  \ 
                             |
                             | '...' Interpret all characters between the quotes
                             |       as ASCII characters
                             |
Variables                    |
  set                        | Displays all shell variables and function
                             |
  env                        | Displays only environment variables
                             | (i.e. variables with -x attribute set)
                             |
  $$ or ${...}                 | Reference a value stored in a variable
                             |
  `...`  or $(...)             | Execute command(s) and return the output as input
                             | for another command
  `$((...))` or `$[...]`         | Perform an Arithmetic operation on the contents of
                             | variables and retun its results
                             |
  `$?`                         | "Return" or "exit" value of the previously executed
                             | command
                             |
  `$0`                         | Name of the command being executed
  `$#`                         | Number of command arguments
  `$*`                         | All command arguments
  `$1, $2, ... $N`             | Value of the corresponding argument
  `$$`                         | Process ID of the current shell
                             |
-------------------------------------------------------------------------------
== Common Shell Commands ==
-------------------------------------------------------------------------------
  View File Content          |
    tac                      | Same as cat, but displays the files in reverse
                             |
    head                     | Displays the first lines of a file
                             | to set the number of lines use the -n option
                             |
    Tails                    | Display the last lines of a file
                             | To set the number lines use the -n option
                             | To output append data use the -f option
                             |
  Backup-Oriented Shell      |
  Commands                   |
    tar                      | Create, expand or list archive files
                             | * Use option c to create a archive
                             | * use option f to specify the archive file name
                             | * use option v for verbose mode
                             | * use option x to extract an archive
                             | * use option t to list the content of an archive
                             | * use option z to (un-)compress the archive with gzip
                             | * use the j to (un-)compress the archive with bzip
                             |
    cpio                     | Another archiving command
                             |
    gzip                     | Compress files using he gzip algorithm
                             | Option -d same as gunzip
                             |
    gunzip                   | Expand files compressed with gzip
                             |
    bzip2                    | Compress files sing the bzip2 algorithm
                             |
    bunzip2                  | Expand files compressed with bzip
                             |
  Special File Copying       |
  Commands                   |
    rsync                    | Copy only deltas between two directories
                             | * Locacl or via network
                             | * Uses ssh as default transport
                             | * Can talk to rsync daemon on the remote machine
                             |
    dd                       | Copies files block by block
                             | * Used to create disk or partition images
                             | * most important options:
                             |   if=input_file
                             |   of=output_file
                             |   bs=block_size
                             |
  Search for files           |
    find                     | Search for files or directories
                             |  * Syntax: find path criterion [action]
                             |
    type                     | Shows the kind of command, eg:
                             | * shell built-in
                             | * external command
                             | * alias
                             | * function
                             |
                             |
                             |
                             |
                             |
                             |
-------------------------------------------------------------------------------
== Remote administration ==
=== SSH ===
  Read SSH host keys from    | ssh-keyscan
  another system             |   -t  - Type of key
                             |
  SSH Server Configuration   | configuration file: /etc/ssh/sshd_config
                             |
    AllowUsers               | Allows SSH login only for users
                             |
    DenyUsers                | Denies SSH login to users listed
                             |
    ListenAddress            | Local addresses that sshd listens on.
                             | Syntax: IP_address:port
                             |
    Port                     | Port number that sshd listens on. (default 22)
                             | Multiple options of this type are permitted
                             |
    PasswordAuthentication   | Specifies whether password authentication is
                             | allowed. To disable it, set this and UsePam to no
                             |
    UsePam                   | Enables the Pluggable Authentication module interface
                             |
  Client Configuration       |
                             |
    Create an SSH key Pair   | ssh-keygen
                             |    -t type of key
                             |
    upload public key        | ssh-copy-id -i <location of key> username@host
                             |    -i (location of key
                             |
  Use the SSH Agent          | eval $(ssh-agent -s)
    Eliminate the need to    | ssh-add .ssh/id_dsa
    type the passphrase upon |
    each connection          |
-------------------------------------------------------------------------------
=== vnc ===
  Remote management          | * SLE Provides management useing Virtual Network
                             |   Computing (VNC)
                             |
                             | * VN enables manaement via a graphical desktop
                             |
                             | * VNC is
                             |     - Platform independent
                             |     - Opwn source
                             |
                             | * VNC consists ot two components
                             |   * Server
                             |   * client
                             |
  Configured using YaST      | -> Remote Management (VNC) option
                             |
  Three options:             | * Allow Remote Management with Session Management
                             | * Allow Remote Management without Session Management
                             | * Do not allow Remot Administration
                             |
                             | Firewall configuration option is available
                             |
  Remote Management Options  | * Allow remote manage with Session Management
                             |   * Enables multiple concurrent sessions
                             |   * Access available to multople clients simultaneously
                             |   * All applications started in this session run
                             |     regardless of client connections until the 
                             |     session is terminated
                             |
                             | * Allow Remote Management without Session Management
                             |   * Once concurrent session only
                             |
  Configure a One Time VNC   | * One-time VNC sessions are started via the xinetd daemon
    Session                  | * A configuration fie is located at /etc/xinetd.d/vnc
                             | * By default it offers:
                             |   * Three fore VNC view (vnc1 to vnc3)
                             |   * Three serving a Java applet (vnchttpd1 to vnchttp3)
                             |   * By default only vnc1 and vnchttpd1 are active
                             |
                             | * To activate a configuration:
                             |   ( Comment the line disable = yes with a # character
                             |   in the first column
                             |
                             | * To configure the Xvnc server:
                             |   * see Xvnc --help
                             |
                             | * use any VNC Client
                             |   * Default port TCP 5901
                             | * Java enabled web browser
                             |   * `http://<ip or fqdn or host>:5801`
-------------------------------------------------------------------------------
= Week Three =
-------------------------------------------------------------------------------
== Define and List SLE12 boot Process ==

BIOS/UEFI
`|------------------|`
`|    BIOS/UEFI     |`
`-------------------`
`         |`
  `|------------------|`
  `|   Stage 1 - MBR  |`
`  |------------------`
    Bootloader
  `|------------------|`
  `|   Stage 2 -      |`
`  ``|------------------``
         |
  `|------------------|`
  `|   Kernel         |`
  `|`  initramfs       |
`  |------------------|`
`  |Hardware (udev)   |`
`  |__________________|`
`         |`
`  |--------------------------------|`
`  |   |---------------------------||`
`  |   |  systemclt default        ||`
`  |   |---------------------------||`
`  |   |     /etc/systemd/system/  ||`
`  |   |     default.target        ||`
`  |   |---------------------------||`
`  |                  |             |`
`  |   |---------------------------||`
`  |   |   /usr/lib/systemd/system/||`
`  |   |      *.target             ||`
`  |   |---------------------------||`
`  |         Default target         |`
`  |   |---------------------------||`
`  |   |systemctl start *.service  ||`
`  |   ---------------------------- |`
`  |   |              |GUI (xdm)   ||`
`  |   ---------------------------- |`
`  |   |---------------------------||`
`  |   |/usr/lib/systemd/system/   ||`
`  |   |  getty@.service           ||`
`  |   |---------------------------||`
`  |                 |              |`
`  |   |---------------------------||`
`  |   |   Virtual terminalsa      ||`
`  |   ---------------------------- |`
`  ----------------------------------`
initramfs
                             | * cpio Archinve
                             | * Loaded by the kernel intor Ram disk
                             | * Minimal Linux Evironment 
                             | * udev provides the iniramfs with the needed devices
                             |   * mkinitrd creates an initramfs
                             |   * mkinitrd -R creates an init executable
-------------------------------------------------------------------------------
== Define and Explain UEFI, Secure Boot, and Trusted Execution ==
-------------------------------------------------------------------------------
  Advantages of UEFI         | * Advantages of UEFI CPU-independent architecture
                             |   and drivers
                             | * Flexible pre-OS environment with network capabilities
                             | * Compatibility Support Module (CSM)
                             | * PC-BIOS-like emulation
                             | * Can user secure boot     `|BIOS > Any os Loader Code <- ? Malware ? _> OS start>`
                             |                           ` |UEFI > Verified OS Loader > OS start > os verified`
                             |
-------------------------------------------------------------------------------
  Difference between GRUB    | * Different configuration files
  Legacy and GRUB2           | * More file systems are supported (e.g., Btrfs)
                             | * Read files on LVM or RAID devices
                             | * User interface can be:
                             |   * translated
                             |   * altered with themes
                             | * Load modules to support additional features(e.g., file systems)
                             | * Search for tand generate boot entries for other kernels and
                             |   operating systems automatically
                             |
  Configuration File         | File                         Description
  Structure                  | /boot/grub2/grub.cfg         Configuration of the GRUB2 menu items
                             | /boot/grub2/custom.cfg       Add custom items to the boot menu
                             | /etc/default/grub            User setting of GRUB2, additional environmenta
                             |                              settings
                             | /etc/grub./*                 Integrated into the main configuration file
                             | /etc/sysconfig/bootloader    Boot loader independent settings needed by YaST
                             |                              and new kernels
                             | /boot/grub2/x86_64-efi,      Architecture-specific options
                             | /boot/grub2/power-ieee12
                             | /boot/grub2/s390x
-------------------------------------------------------------------------------
  Grube 2 General Options    | Component            Description
                             | GRUB_DEFAULT         Sets the boot menu entry that is booted by
                             |                      defaut. Its value can be a numeric value,
                             |                      the complete name of a menu entry, or saved
                             | GRUB_DEFAULT=2       boot the third (counted from zero) boot 
                             |                      menu entry
                             | GRUB_DEFAULT="2>0"   boots the first submenu of the third top-
                             |                      level menu enty
                             | GRUB_DEFAULT="menu1" 
                             |
                             |
                             |
                             |

== Understand the GRUB2 Book loader ==
                             |
                             |
  One-time VNC sessions are  |
  are started with the       |
  xinetd daemon              |
                             |
                             |
                             |
                             |
                             |
                             |
-------------------------------------------------------------------------------
== Define and Describe systemd ==
  What is systemd            | * systemd is a system and session manager for Linux,
                             |   compatible with System V and LSB init scripts
                             |
                             | * systemd
                             |   * Aggressive parallelization capabilities
                             |   * on-demand daemon activation
                             |   * keeps track of processes using Linux Kernal 
                             |     Controls Groups (cgroups)
                             |   * can auto-restart failing daemons
                             |   * Logging not only of syslog messages from services,
                             |     but also messages services displayed on stdout
                             |   * Well documented in manual pages
                             |
  systemd Basics             | * Always process ID 1
                             |   * All other programs are either startded directly by
                             |     systemd or by one of its child processes
                             |   * Started directly by the Kernel
                             |   * Resists signal 9
                             |   * Replacement for System V init daemon
                             |     * Fully compatible with System V init
                             |
  Unit File                  | * A unit configuration file encodes information about
                             |   a service, a socket, a device, etc.
                             | * A manual page for each type, such as
                             |   * man systemd.service, explains the specifics of the 
                             |     respective type
                             |   * Service unit file can replace the /etc/init.d/ scripts
                             |
                             | * File name extension defines Unit type
                             | * Location: /usr/lib/systemd/system/   <-- applying service packs can overwrite
                             |             /etc/systemd/system        <-- apply changes here 
                             |                                            files do not run if they do not exist here.
                             |
                             |    Unit             Filename
                             |    Service          <service>.service
                             |    Targe           <target>.target
                             |    Sockets          <socket>.socket
                             |    Path             <path>.path
                             |    Timer            <timer>.timer
                             |    Mountpoint       <mount>.mount
                             |    Automount Point  <automount>.automount
                             |    Swap             <swap>.swap
                             |    Device           <device>.device
                             |    Scope/Slice      <scope>.scope
                             |
  Unit File Structure        | * Sections:
                             |   * [Unit]
                             |   * [Service]|[Target]|...
                             |   * [Install]
                             |
  Unit File: [Unit]          | Option           Description
                             | Description      Description
                             | After            Start of the unit is delayed 
                             |                  until all listed units have started up
                             | Before           Invers of After
                             | Requires         The units listed here are activated as well
                             | Conflicts        Unit is in conflict with the listed units
                             |
  Unit File Sections:        | Option           Description
    [Service]                | Type             Process start-up type
                             |                  Available types: simple, forking, onshot, dbus, notify, idle
                             | EnvironmentFile  File to read environment variables from
                             | ExecStart        Command line(absolute path, with arguments) that is
                             |                  execute when theis sevice is tarted
                             | ExecStartPre,    Additional commands that are executed before or after the     
                             | ExecStartPost    command in Execstart
                             | ExecReload       Commands to trigger a configuration reload in the service
                             | ExecStop         Commands to execute to stop the service
                             | KillMode         How processes of this service shall be killed.
                             |                  Available modes: control-group, process, none
                             | Restart          Configures whether the main service process shall be 
                             |                  restarted when it exits.
                             |                  Available options: no, one-success, on-failure, on-abort, or
                             |                  always
                             |
  Unit File Sections:        | * Applies to [Service], [Socket], [Mount],[Swap] 
    Secure Services          |   sections /unit types
                             |   * Limit networ access (namespace)
                             |     - PrivateNetwork=yes
                             |
                             |   * Private /tmp
                             |     - PrivateTmp=yes
                             |   * Restrict access to directories
                             |     - InaccessibleDirectories=/home
                             |     - ReadOnlyDirectories=/var
                             |   * Restrict capabilities
                             |     - CapabilitiesBoundingSet=CAP_CHOWN CAP_KILL
                             |     - CapabilitiesBoundingSet=-Cap_PTRACE (all but this one)
                             |
                             |   * Set user, group, and root directory
                             |     - User=
                             |     - Group=
                             |     - RootDirectory=
                             |   * Device access restriction (whitelist)
                             |     - DeviceAllow=/dev/nul rw
                             |   * Resource restriction
                             |     - LimitNPROC=1
                             |     - LimitFSIZE=0
                             |
  Unit File Sections:        | Option         Description
    [Install]                | WantedBy       A symbolic link is created in the .wants/ or
                             | RequiredBy     .requires/ directory of each of the listed units
                             |                wehn this unit is installed by systemctl enable
                             |
                             | Alias          A space-seperated list of additional names this
                             |                unit shall be installed under.
                             | Also           Additiona units to install/deinstall when this unit
                             |                is installed/deinstalled
                             |
  systemctl                  | * Systemctl is the command to interact with systemd
                             | * without options,it displays the various units active on the
                             |   system, with -a also the inactive units
                             | * by default less is used a pager
                             | * Some units are not defined in files in
                             |   /usr/lib/systemd/system/, they are created automatically,
                             |   such as:
                             |     * various .mount units based on entries in /etc/fstab
                             |     * other units based on rules in /usr/lib/udev/rules.d/ that contain
                             |       rules that contain TAG+=systemd entries
                             |
  Manage Services            |              command
                             | systemd      systemctl <command> <service>.service
                             | System V     rc<service> <command>
                             |
                             | Systemd Command        Description                     System V
                             | start                  Start service                   start
                             | stop                   Stop service                    stop
                             | restart                Restart service                 restart
                             | reload                 Reload configuration without    reload
                             |                        Interupting operation
                             | reload-or-restart      Reload service if it is         n/a
                             |                        Supported, otherwise restart
                             |                        It
                             | reload-or-try-restart  Reload service if it is         n/a
                             |                        supported, otherwise restart
                             |                        it if it is running
                             | status                 List status information         status
                             | is-active              List short status information   status
                             |
  Enabling/Disabling         | * systemctl <command> <service>.service
    Services                 |
                             | systemd      Description                                 System V
                             | enable       Enable service                              inserv
                             | disable      Disable service                             inserv -r
                             | is-enabled   Check if service is enabled                 chkconfig
                             | reenable     Disable service and enable it afterwards    n/a
                             | mask         After "disabling" a service, it can still   n/a
                             |              be started manually, after masking it 
                             |              cannot
                             | umask        A service that hs a been masked can only    n/a
                             |              be used again after it has been unmasked
                             |
  (continue at 19:56)        |
                             |
                             |
                             |
-------------------------------------------------------------------------------
Notes - 
  Package Manager: zypper
  Install command: zypper in <package name>
